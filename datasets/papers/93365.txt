From on-line to batch learning