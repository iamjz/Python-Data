Using Versions in Update Transactions: Application to Integrity Checking