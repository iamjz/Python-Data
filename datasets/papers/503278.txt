Types as models: model checking message-passing programs