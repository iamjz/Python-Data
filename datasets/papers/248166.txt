Masking the overhead of protocol layering