Necessary and Sufficient Conditions For Collision-Free Hashing