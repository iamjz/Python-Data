A Framework for Environment Aware Mobile Applications