Improving locality by critical working sets