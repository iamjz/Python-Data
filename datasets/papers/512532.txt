Adoption and focus: practical linear types for imperative programming