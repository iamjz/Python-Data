Router plugins: a software architecture for next generation routers