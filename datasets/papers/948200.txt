Epidemic profiles and defense of scale-free networks