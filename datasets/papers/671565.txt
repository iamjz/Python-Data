A Knowledge Theoretic Account of Recovery in Distributed Systems: The Case of Negotiated Commitment