Piranha: a scalable architecture based on single-chip multiprocessing