HAT, not CAP: towards highly available transactions