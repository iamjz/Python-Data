Locks with constrained sharing (extended abstract)