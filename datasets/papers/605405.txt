Understanding and improving operating system effects in control flow prediction