Programming distributed erlang applications: pitfalls and recipes