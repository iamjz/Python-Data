Ninja: A Framework for Network Services