Type-based race detection for Java