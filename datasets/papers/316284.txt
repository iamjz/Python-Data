Teapot: A Domain-Specific Language  for Writing Cache Coherence Protocols