Sharing memory robustly in message-passing systems