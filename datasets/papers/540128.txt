The architecture of concurrent programs