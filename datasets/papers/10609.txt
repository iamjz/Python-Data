Efficient synchronization of multiprocessors with shared memory