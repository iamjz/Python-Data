Transaction Atomicity in the Presence of Network Partitions