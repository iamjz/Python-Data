Transactional memory: architectural support for lock-free data structures