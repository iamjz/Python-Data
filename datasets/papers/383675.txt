A general tool for replicating distributed services