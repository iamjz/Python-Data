A control-theoretic approach to flow control