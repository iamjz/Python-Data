Rx: treating bugs as allergies---a safe method to survive software failures