Dyna: a declarative language for implementing dynamic programs