An exercise in proving parallel programs correct