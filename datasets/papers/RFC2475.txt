An Architecture for Differentiated Service