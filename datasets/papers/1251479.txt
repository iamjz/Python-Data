Using random subsets to build scalable network services