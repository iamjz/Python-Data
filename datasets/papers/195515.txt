Hardware and software support for efficient exception handling