Effective fine-grain synchronization for automatically parallelized programs using optimistic synchronization primitives